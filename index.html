<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>ç¾½ä½ å•†åŸ Â· ç¾½æ¯›çƒè£…å¤‡è´­ä¹°</title>
  <style>
    :root{--primary:#0f6cb9;--accent:#f1b431;--muted:#6b7280}
    *{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Helvetica Neue","PingFang SC","Microsoft YaHei",Arial}
    body{margin:0;background:#f7fbff;color:#111}
    .container{max-width:1100px;margin:24px auto;padding:0 16px}

    header{display:flex;align-items:center;justify-content:space-between}
    .brand{font-weight:800;color:var(--primary);font-size:20px}
    .search{flex:1;margin:0 18px}
    .search input{width:100%;padding:10px 12px;border-radius:10px;border:1px solid #e6eefb}

    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:16px;margin-top:18px}
    .card{background:#fff;border-radius:12px;padding:12px;box-shadow:0 6px 18px rgba(11,35,68,0.06);display:flex;flex-direction:column}
    .thumb{height:160px;border-radius:8px;background:#eef6ff;display:flex;align-items:center;justify-content:center;font-size:18px;color:var(--muted)}
    .title{margin-top:10px;font-weight:700}
    .desc{color:var(--muted);font-size:13px;margin-top:6px;flex:1}
    .priceRow{display:flex;align-items:center;justify-content:space-between;margin-top:12px}
    .price{font-size:18px;color:var(--primary);font-weight:800}
    .btn{background:var(--primary);color:#fff;padding:8px 12px;border-radius:8px;border:none;font-weight:700;cursor:pointer}
    .btn.ghost{background:transparent;color:var(--primary);border:1px solid #d5eafc}

    .cart{position:fixed;right:22px;bottom:22px;background:var(--primary);color:#fff;padding:12px;border-radius:12px;box-shadow:0 12px 30px rgba(15,108,185,0.2);display:flex;gap:12px;align-items:center}
    .cart .count{background:#fff;color:var(--primary);width:26px;height:26px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:800}

    .modal{position:fixed;inset:0;background:rgba(0,0,0,0.45);display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:all .15s}
    .modal.open{opacity:1;pointer-events:auto}
    .modal-card{width:420px;background:#fff;border-radius:12px;padding:18px}
    .row{display:flex;gap:12px;align-items:center}
    .small{font-size:13px;color:var(--muted)}

    footer{margin-top:28px;padding:18px;text-align:center;color:var(--muted)}

    @media(max-width:520px){.grid{grid-template-columns:repeat(1,1fr)}.modal-card{width:94%}}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="brand">ç¾½ä½ å•†åŸ</div>
      <div class="search"><input id="searchInput" placeholder="æœç´¢è£…å¤‡ï¼Œä¾‹å¦‚ï¼šçƒæ‹ã€ç¾½æ¯›çƒã€æ‰‹èƒ¶"></div>
      <div>
        <button class="btn ghost" id="viewAll">å…¨éƒ¨</button>
      </div>
    </header>

    <section>
      <div style="margin-top:12px;color:var(--muted)">ç²¾é€‰è£…å¤‡ â€” ç«‹å³ä¸‹å•ï¼Œæ”¯æŒæ‰«ç /ç½‘é¡µæ”¯ä»˜ï¼ˆæ¼”ç¤ºï¼‰</div>
      <div class="grid" id="productGrid"></div>
    </section>

    <footer>æ”¯æŒçœŸå®æ¥å…¥æ”¯ä»˜æ¸ é“ï¼ˆç¤ºä¾‹æœªæ¥å…¥ï¼‰ã€‚å¦‚éœ€æ¥å…¥å¾®ä¿¡/æ”¯ä»˜å®/Stripeï¼Œæˆ‘å¯ä»¥å¸®ä½ ç”Ÿæˆç¤ºä¾‹ä»£ç ã€‚</footer>
  </div>

  <!-- è´­ç‰©è½¦æµ®åŠ¨ -->
  <div class="cart" id="cartBtn" title="æŸ¥çœ‹è´­ç‰©è½¦">
    <div style="font-weight:800">è´­ç‰©è½¦</div>
    <div class="count" id="cartCount">0</div>
  </div>

  <!-- è´­ç‰©è½¦æ¨¡æ€ -->
  <div class="modal" id="cartModal">
    <div class="modal-card">
      <h3>è´­ç‰©è½¦</h3>
      <div id="cartList" style="max-height:320px;overflow:auto;margin-top:8px"></div>
      <div style="margin-top:12px;display:flex;justify-content:space-between;align-items:center">
        <div>
          <div class="small">æ€»è®¡</div>
          <div style="font-weight:800;font-size:18px" id="cartTotal">Â¥0</div>
        </div>
        <div>
          <button class="btn ghost" id="clearCart">æ¸…ç©º</button>
          <button class="btn" id="checkoutBtn">å»ç»“ç®—</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ç¤ºä¾‹å•†å“æ•°æ®ï¼ˆå¯æ›¿æ¢å›¾ç‰‡ä¸è¯¦æƒ…ï¼‰
    const products = [
      {id:1,name:'ä¸“ä¸šç¾½æ¯›çƒæ‹ A1',price:899,stock:12,desc:'è½»é‡ç¢³ç´ æ‹ï¼Œé€‚åˆè¿è´¯å¿«æ”»ã€‚',img:''},
      {id:2,name:'è¿›æ”»å‹ç¾½æ¯›çƒæ‹ B6',price:1099,stock:5,desc:'é«˜å¼¹åŠ›æ†èº«ï¼Œçˆ†å‘åŠ›æ›´å¼ºã€‚',img:''},
      {id:3,name:'æ–°æ‰‹å…¥é—¨æ‹å¥—è£…',price:199,stock:40,desc:'å«ç¾½æ¯›çƒ+æ‰‹èƒ¶ï¼Œæ€§ä»·æ¯”é«˜ã€‚',img:''},
      {id:4,name:'é«˜è€ç”¨ç¾½æ¯›çƒï¼ˆ12åªï¼‰',price:69,stock:120,desc:'è®­ç»ƒä¸“ç”¨ï¼Œç¨³å®šä¸æ–­è£‚ã€‚',img:''},
      {id:5,name:'ä¸“ä¸šé‹ï¼ˆè½»ç›ˆè€ç£¨ï¼‰',price:599,stock:8,desc:'é˜²æ»‘å‡éœ‡ï¼Œé€‚åˆå¤šåœºåœ°ã€‚',img:''},
      {id:6,name:'å¸æ±—æ‰‹èƒ¶ï¼ˆ5æ¡è£…ï¼‰',price:29,stock:200,desc:'å¼ºå¸æ±—ï¼Œä¸æ»‘æ‰‹ã€‚',img:''},
      {id:7,name:'é˜²æŠ¤æŠ¤è‡‚',price:49,stock:60,desc:'é˜²æ“¦ä¼¤ï¼Œå‡å°‘è¿åŠ¨æŸä¼¤ã€‚',img:''},
      {id:8,name:'ç¾½æ¯›çƒæ‹åŒ…',price:129,stock:35,desc:'åŒè‚©è®¾è®¡ï¼Œå¤šå±‚æ”¶çº³ã€‚',img:''}
    ];

    // æ¸²æŸ“å•†å“
    const grid=document.getElementById('productGrid');
    function renderProducts(list){
      grid.innerHTML='';
      list.forEach(p=>{
        const card=document.createElement('div');card.className='card';
        card.innerHTML = `
          <div class="thumb">${p.img?'<img src="'+p.img+'" style="max-width:100%;max-height:100%">':'ğŸ¸'}</div>
          <div class="title">${p.name}</div>
          <div class="desc">${p.desc}</div>
          <div class="priceRow">
            <div class="price">Â¥${p.price}</div>
            <div>
              <button class="btn ghost addCart" data-id="${p.id}">åŠ å…¥è´­ç‰©è½¦</button>
              <button class="btn buyNow" data-id="${p.id}">ç«‹å³è´­ä¹°</button>
            </div>
          </div>
        `;
        grid.appendChild(card);
      });
    }
    renderProducts(products);

    // è´­ç‰©è½¦é€»è¾‘ï¼ˆæœ¬åœ°æ¨¡æ‹Ÿï¼‰
    let cart = {}; // id -> qty
    const cartCountEl=document.getElementById('cartCount');
    const cartBtn=document.getElementById('cartBtn');
    const cartModal=document.getElementById('cartModal');
    const cartList=document.getElementById('cartList');
    const cartTotalEl=document.getElementById('cartTotal');

    function updateCartUI(){
      const totalQty=Object.values(cart).reduce((a,b)=>a+b,0);
      cartCountEl.textContent=totalQty;
      renderCartList();
    }

    function renderCartList(){
      cartList.innerHTML='';
      let total=0;
      if(Object.keys(cart).length===0){cartList.innerHTML='<div class="small">è´­ç‰©è½¦ä¸ºç©ºï¼Œå¿«å»æŒ‘é€‰è£…å¤‡å§ï½</div>'}
      Object.entries(cart).forEach(([id,qty])=>{
        const p=products.find(x=>x.id==id);
        const row=document.createElement('div');
        row.className='row';
        row.style.marginTop='10px';
        row.innerHTML=`
          <div style="flex:1">
            <div style="font-weight:700">${p.name}</div>
            <div class="small">Â¥${p.price} Ã— ${qty}</div>
          </div>
          <div style="display:flex;gap:6px;align-items:center">
            <button class="btn ghost dec" data-id="${id}">-</button>
            <div style="width:28px;text-align:center">${qty}</div>
            <button class="btn ghost inc" data-id="${id}">+</button>
            <button class="btn" style="margin-left:8px" data-id="${id}" class="remove">ç§»é™¤</button>
          </div>
        `;
        cartList.appendChild(row);
        total += p.price * qty;
      });
      cartTotalEl.textContent = 'Â¥' + total;

      // attach handlers
      Array.from(cartList.querySelectorAll('.inc')).forEach(btn=>btn.addEventListener('click',()=>{const id=btn.dataset.id; cart[id] = (cart[id]||0)+1; updateCartUI();}));
      Array.from(cartList.querySelectorAll('.dec')).forEach(btn=>btn.addEventListener('click',()=>{const id=btn.dataset.id; if((cart[id]||0)>1){cart[id]--; } else { delete cart[id]; } updateCartUI();}));
      Array.from(cartList.querySelectorAll('button[data-id]')).forEach(btn=>{ if(btn.textContent==='ç§»é™¤'){btn.addEventListener('click',()=>{delete cart[btn.dataset.id]; updateCartUI();})}});
    }

    // add to cart / buy now
    document.addEventListener('click',e=>{
      if(e.target.matches('.addCart')){
        const id=e.target.dataset.id; cart[id] = (cart[id]||0)+1; updateCartUI();
        alert('å·²åŠ å…¥è´­ç‰©è½¦');
      }
      if(e.target.matches('.buyNow')){
        const id=e.target.dataset.id; cart[id] = (cart[id]||0)+1; updateCartUI(); openCart();
      }
    });

    // æ‰“å¼€è´­ç‰©è½¦
    function openCart(){ cartModal.classList.add('open'); }
    function closeCart(){ cartModal.classList.remove('open'); }
    cartBtn.addEventListener('click',openCart);
    cartModal.addEventListener('click',e=>{ if(e.target===cartModal) closeCart(); });

    // æ¸…ç©º
    document.getElementById('clearCart').addEventListener('click',()=>{ if(confirm('ç¡®è®¤æ¸…ç©ºè´­ç‰©è½¦ï¼Ÿ')){cart={}; updateCartUI();}});

    // ç»“ç®—ï¼ˆæ¨¡æ‹Ÿï¼‰
    document.getElementById('checkoutBtn').addEventListener('click',()=>{
      if(Object.keys(cart).length===0){ alert('è´­ç‰©è½¦ä¸ºç©º'); return; }
      // è®¡ç®—æ€»ä»·
      const total = Object.entries(cart).reduce((s,[id,qty])=>{
        const p=products.find(x=>x.id==id); return s + p.price*qty;
      },0);
      // ç”Ÿæˆæ¨¡æ‹Ÿè®¢å•å·
      const orderNo = 'ORD' + Date.now();
      // ç®€å•ç»“ç®—æµç¨‹ï¼šå¼¹çª—ç¡®è®¤å¹¶æä¾›æ¨¡æ‹Ÿæ”¯ä»˜é“¾æ¥
      if(confirm(`ç¡®è®¤æ”¯ä»˜ Â¥${total} ? (æ¼”ç¤º)`)){
        // åœ¨çœŸå®åœºæ™¯ï¼Œä½ ä¼šæŠŠè®¢å•å‘é€åˆ°åç«¯å¹¶æ¥å…¥æ”¯ä»˜SDK
        alert('æ”¯ä»˜å·²å®Œæˆï¼ˆæ¨¡æ‹Ÿï¼‰ã€‚è®¢å•å·ï¼š' + orderNo);
        cart = {}; updateCartUI(); closeCart();
      }
    });

    // æœç´¢è¿‡æ»¤
    document.getElementById('searchInput').addEventListener('input',(e)=>{
      const q=e.target.value.trim().toLowerCase();
      if(!q) renderProducts(products);
      else renderProducts(products.filter(p=>p.name.toLowerCase().includes(q)||p.desc.toLowerCase().includes(q)));
    });

    // å…¨éƒ¨æŒ‰é’®
    document.getElementById('viewAll').addEventListener('click',()=>renderProducts(products));

    // åˆå§‹UI
    updateCartUI();
  </script>
</body>
</html>
